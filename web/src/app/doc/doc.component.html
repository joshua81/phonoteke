<doc-menu *ngIf="doc"></doc-menu>
<div *ngIf="doc" class="container w-max p-0 mt-2">
    <div class="bg-white p-2">
      <!-- cover -->
      <div class="d-flex flex-row">
        <div class="cover mr-2">
          <img *ngIf="doc.coverM == null" class="cover card-img-top" src="{{doc.cover}}"/>
          <img *ngIf="doc.coverM != null" class="cover card-img-top" src="{{doc.coverM}}"/>
          <!-- spotify + songkick -->
          <div class="songtify d-flex flex-column">
            <img *ngIf="doc.spalbumid" class="icon spotify mb-2" (click)="toggleSpotify()"/>
            <img *ngIf="doc.artistid" class="icon songkick" (click)="loadEvents(doc.artistid)"/>
          </div>
          <!-- podcast player -->
          <div *ngIf="doc.type == 'podcast'" class="player d-flex flex-row align-items-center p-2">
            <div class="player-button mr-auto" (click)="playPause($event)">
              <span *ngIf="audio == null || audio.paused" class="player-play"></span>
              <span *ngIf="audio != null && !audio.paused" class="player-pause"></span>
            </div>
            <div class="player-button mr-3" (click)="backward($event)">
              <span *ngIf="audio != null" class="player-backward"></span>
            </div>
            <div class="player-button" (click)="forward($event)">
              <span *ngIf="audio != null" class="player-forward"></span>
            </div>
          </div>
        </div>
        <div class="w-100 p-0">
          <h3 class="text-truncate-2" [innerHTML]="doc.artist"></h3>
          <h2 class="text-truncate-2" [innerHTML]="doc.title"></h2>
          <h3 *ngIf="doc.type == 'album' && doc.label" class="mx-auto">{{doc.label + ' | ' + doc.year + ' | ' + doc.genres}}</h3>
          <h3 *ngIf="doc.authors" class="text-muted mx-auto mb-2">di {{doc.authors}}</h3>
        </div>
      </div>

      <!-- vote -->
      <div class="d-flex flex-row justify-content-center mt-3 mb-3">
        <h2 *ngIf="doc.type == 'album' && doc.vote && doc.vote != 10" class="vote">{{doc.vote}}</h2>
        <div *ngIf="doc.type == 'album' && doc.vote && doc.vote == 10" class="vote">
          <span class="star"></span>
        </div>
      </div>

      <!-- content -->
      <p *ngIf="doc.review" class="text-justify" [innerHTML]="doc.review"></p>
      <app-tracks *ngIf="doc.type == 'podcast'" [tracks]="doc.tracks"></app-tracks>
      
      <!-- videos + links -->
      <app-video *ngIf="doc.type != 'podcast'" [tracks]="doc.tracks" type="videos" label="Video"></app-video>
      <app-link [links]="podcasts" type="podcasts" label="Podcast"></app-link>
      <app-link [links]="links" type="links" label="Link"></app-link>
    </div>
</div>

<!-- Spotify player-->
<div *ngIf="spotify" class="d-flex flex-row fixed-bottom">
  <iframe [src]="spotifyUrl()" width="100%" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
</div>

<!-- Events -->
<app-events [artist]="songkick"></app-events>
