<doc-menu *ngIf="doc"></doc-menu>
<div *ngIf="doc" class="container pt-5 pb-5">
  <div class="row pt-2">
    <div class="col-auto cover pl-0 pr-3">
      <div>
        <img class="cover rounded" src="{{doc.cover}}"/>
        <!--img *ngIf="doc.type != 'album' && doc.coverL !== undefined" class="cover rounded" src="{{doc.coverL}}"/-->
        <div *ngIf="doc.type == 'album' && doc.vote && doc.vote == 10" class="vote">
          <span class="star"></span>
        </div>
        <div *ngIf="doc.type == 'album' && doc.vote && doc.vote != 10" class="vote">{{doc.vote}}</div>
      </div>

      <div *ngIf="service.audio" class="player d-flex flex-row align-items-center justify-content-center">
        <div (click)="backward($event)">
          <span class="backwardbtn"></span>
        </div>
        <div class="pl-2 pr-2" (click)="playPause($event)">
          <span *ngIf="service.audio.paused" class="playbtn"></span>
          <span *ngIf="!service.audio.paused" class="pausebtn"></span>
        </div>
        <div (click)="forward($event)">
          <span class="forwardbtn"></span>
        </div>
      </div>
    </div>

    <div class="col-auto text-white pl-0 pr-0 pt-3">
      <h1 *ngIf="doc.type != 'artist'" [innerHTML]="doc.title"></h1>
      <h2 *ngIf="doc.type != 'artist'" [innerHTML]="doc.artist"></h2>
      <h1 *ngIf="doc.type == 'artist'" [innerHTML]="doc.artist"></h1>
      <h3 *ngIf="doc.type == 'album' && doc.label">{{doc.label + ' | ' + doc.year + ' | ' + doc.genres}}</h3>
      <h3 *ngIf="doc.authors">di {{doc.authors}}</h3>
    </div>
  </div>

  <div class="row pt-3">
    <div>
      <a *ngIf="doc.type != 'album' && doc.artistid" class="pr-2" href="{{'https://musicbrainz.org/artist/' + doc.artistid}}" target="_blank">
        <img class="musicbrainz">
      </a>
      <a *ngIf="doc.type == 'album' && doc.albumid" class="pr-2" href="{{'https://musicbrainz.org/release-group/' + doc.albumid}}" target="_blank">
        <img class="musicbrainz">
      </a>
    </div>
    <div *ngIf="doc.artistid != null" class="pr-2">
      <a (click)="loadEvents(doc.artistid)">
        <img class="songkick">
      </a>
    </div>
    <div *ngIf="videos.length > 0" class="pr-2">
      <a (click)="loadVideos()">
        <img class="youtube">
      </a>
    </div>
    <!--a *ngIf="doc.type != 'album' && doc.spartistid" class="pr-2"
      href="{{'https://open.spotify.com/artist/' + doc.spartistid}}" target="_blank">
      <img class="spotify">
    </a>
    <a *ngIf="doc.type == 'album' && doc.spalbumid" class="pr-2"
      href="{{'https://open.spotify.com/album/' + doc.spalbumid}}" target="_blank">
      <img class="spotify">
    </a-->
    <div>
      <a href="{{doc.url}}" target="_blank">
        <img class="{{doc.source}}">
      </a>
    </div>
  </div>

  <div class="row pt-3">
    <p *ngIf="doc.review" class="text-justify text-white" 
      [innerHTML]="doc.review">
    </p>
  </div>

  <div *ngIf="doc.tracks && doc.tracks.length != 0" class="row justify-content-center">
    <div class="track list-group">
      <div *ngFor="let track of doc.tracks" class="w-100 pl-0 pr-0 list-group-item">
        <div class="d-flex">
          <div class="w-100" [innerHTML]="track.title"></div>
          <!--a *ngIf="track.albumid" href="{{'https://musicbrainz.org/release-group/' + track.albumid}}" target="_blank">
            <img class="musicbrainz">
          </a-->
          <a *ngIf="doc.artistid == null && track.artistid != null" (click)="loadEvents(track.artistid)" class="pl-2">
            <img class="songkick">
          </a>
          <!--a *ngIf="track.youtube" href="{{'https://www.youtube.com/watch?v=' + track.youtube}}" class="pl-2" target="_blank">
            <img class="youtube">
          </a-->
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="links && links.length != 0" class="row pt-3 justify-content-center">
    <div class="link list-group">
      <a *ngFor="let link of links" [routerLink]="['/docs/' + link.id]" class="w-100 pl-0 pr-0 list-group-item">
        <div class="d-flex">
          <img class="link" src="{{link.cover}}">
          <!--img *ngIf="link.type != 'album' && link.coverS !== undefined" class="link" src="{{link.coverS}}"-->
          <div *ngIf="link.type == 'album'" class="pl-2 w-100">
            <div class="font-weight-bold">({{link.year}}) {{link.title}}</div>
            <div>{{link.artist}}</div>
          </div>
          <div *ngIf="link.type == 'concert' || link.type == 'interview'" class="pl-2">
            <div class="font-weight-bold">{{link.title}}</div>
            <div>{{link.artist}}</div>
          </div>
          <div *ngIf="link.type == 'artist'" class="pl-2">
            <div class="font-weight-bold">{{link.artist}}</div>
          </div>
          <div *ngIf="link.type == 'album' && link.vote && link.vote == 10" class="votelink">
            <span class="star"></span>
          </div>
          <div *ngIf="link.type == 'album' && link.vote && link.vote != 10" class="votelink">{{link.vote}}</div>
        </div>
      </a>
    </div>
  </div>
</div>

<app-youtube *ngIf="showVideos == true" [videos]="videos"></app-youtube>
<app-events *ngIf="showEvents == true" [events]="events"></app-events>
